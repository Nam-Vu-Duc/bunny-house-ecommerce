<div class="user-all-products-container">
  <div class="title">
    <i class="fi fi-sr-flame"></i>
    <div class="main-title" style="text-transform:uppercase"><b>Toàn bộ sản phẩm nè</b></div>
  </div>

  <div class="all-category-skincare">
  </div>

  <div class="all-category-makeup">
  </div>

  <div class="sort-button">
    Sắp xếp
    {{{sortable 'price' _sort}}}
  </div>
  
  <div class="all-products">
    {{!-- {{#each product}}
      <div class="product">
        <a href="/product/{{this.slug}}">
          <img src="../../uploads/{{this.avatar}}" alt="">
          <p id="product-price">{{this.price}}đ</p>
          <p id="product-details">{{this.name}}</p>
        </a>
      </div>
    {{/each}} --}}
  </div>

  <span class="see-more-button">
    <button>Xem thêm</button>
  </span>

</div>

<script>

  // update main-title base on params.slug
  var getSlug = `{{type}}`
  var mainTitle = document.querySelector('div.main-title').querySelector('b')
  var getSkincareCategory = document.querySelector('div.all-category-skincare')
  var getMakeupCategory = document.querySelector('div.all-category-makeup')

  if (getSlug === 'flash-sale') {
    mainTitle.innerText = 'Toàn bộ sản phẩm đang sale'
  }
  else if (getSlug === 'hot') {
    mainTitle.innerText = 'Toàn bộ sản phẩm đang hot'
  }
  else if (getSlug === 'new-arrival') {
    mainTitle.innerText = 'Toàn bộ sản phẩm mới về'
  }
  else if (getSlug === 'skincare') {
    mainTitle.innerText = 'Toàn bộ sản phẩm skincare'
    getSkincareCategory.innerHTML = `
      <a href="/all-products/skincare/xit-khoang">Xịt khoáng</a>
      <a href="/all-products/skincare/mat-na">Mặt nạ</a>
      <a href="/all-products/skincare/serum">Serum</a>
      <a href="/all-products/skincare/bha">BHA</a>
      <a href="/all-products/skincare/tay-da-chet">Tẩy da chết</a>
      <a href="/all-products/skincare/duong-da">Dưỡng da</a>
      <a href="/all-products/skincare/toner">Toner</a>
      <a href="/all-products/skincare/nuoc-tay-trang">Nước tẩy trang</a>
      <a href="/all-products/skincare/cham-mun">Chấm mụn</a>
      <a href="/all-products/skincare/kem-duong-am">Kem dưỡng ẩm</a>
      <a href="/all-products/skincare/sua-rua-mat">Sữa rửa mặt</a>
    `
  }
  else if (getSlug === 'makeup') {
    mainTitle.innerText = 'Toàn bộ sản phẩm makeup'
    getMakeupCategory.innerHTML = `
      <a href="/all-products/makeup/phan-ma">Phấn má</a>
      <a href="/all-products/makeup/mascara">Mascara</a>
      <a href="/all-products/makeup/ke-mat">Kẻ mắt</a>  
      <a href="/all-products/makeup/kem-chong-nang">Kem chống nắng</a>
      <a href="/all-products/makeup/che-khuyet-diem">Che khuyết điểm</a>
      <a href="/all-products/makeup/son">Son</a>
    `
  } 
  else {
    getSlug = getSlug.replaceAll('-', ' ')
    mainTitle.innerText = `Toàn bộ sản phẩm ${getSlug}`
  }

  // pagination 
  var seeMoreButton = document.querySelector('span.see-more-button').querySelector('button')
  var allProductsContainer = document.querySelectorAll('div.all-products')

  {{!-- var firstIndex = 0
  var nextIndex = 10 
  for (let i = nextIndex; i < allProductsLength; ++i) {
    allProducts[i].style.display = 'none'
  }

  seeMoreButton.onclick = function() {
    firstIndex += 10
    nextIndex += 10
    if (firstIndex < allProductsLength) {
      for (let i = firstIndex; i < nextIndex; ++i) {
        allProducts[i].style.display = 'grid'
      }
    } 
  } --}}

</script>