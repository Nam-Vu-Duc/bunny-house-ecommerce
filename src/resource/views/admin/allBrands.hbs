<div class="admin-all-brands-container">  
  <div class="board-title">
    <p>Tổng Thương hiệu: {{totalBrand}}</p>
  </div>

  <div class="filter-and-create">
    <select class="filter">
      <option value="">Toàn bộ</option>
      <option value=""></option>
      <option value=""></option>
    </select>

    <a href="/admin/all-brands/brand/create" class="create-brands" id="create-brands">
      <i class="fi fi-br-layer-plus"></i>
      <p>Thêm thương hiệu</p>
    </a>
  </div>

  <div class="table">
    <table>
      <thead>
        <tr>
          <td style="width:  5%">STT             </td>
          <td style="width: 20%">Mã Thương hiệu  </td>
          <td style="width: 15%">Tên Thương Hiệu </td>
          <td style="width: 15%">Tổng Sản Phẩm   </td>
          <td style="width: 15%">Tổng Lượng Bán  </td>
          <td style="width: 25%">Tổng Doanh Thu  </td>
          <td style="width:  5%"></td>
        </tr>
      </thead>

      <tbody>
        {{#each brands}}
        <tr>
          <td>{{addIndex @index 1}}</td>
          <td>{{this._id}}</td>
          <td style="
                display: flex; 
                justify-content: start;
                align-items: center;
                gap: 5px
                "
          >
            <img src="{{this.img.path}}" alt="{{this.name}}" loading="lazy" loading="lazy"> 
            <p>{{this.name}}</p>
          </td> 
          <td>{{this.totalProduct}}</td>
          <td>{{this.totalProduct}}</td>
          <td class="total-revenue">{{this.totalRevenue}}</td>
          <td><a href="/admin/all-brands/brand/{{this._id}}"><button>Chi Tiết</button></a></td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>


  <span class="pagination">
  </span>
</div>

<script>
  // pagination 
  var pagination = document.querySelector('span.pagination')
  var productLength = `{{orderLength}}`
  var currentPage = 1

  // díplay all pages tag
  for (let i = 0; i < productLength; i += 10) {
    var newPage = document.createElement('a')
    newPage.setAttribute('href', `/admin/all-orders?page=${currentPage}&type={{orderType}}`)
    newPage.innerText = `${currentPage}`
    pagination.appendChild(newPage)
    currentPage++
  }

  // Style the current selected page
  var allPagesTag = pagination.querySelectorAll('a')
  for (let i = 0; i < allPagesTag.length; ++i) {
    if (allPagesTag[i].innerText === `{{currentPage}}`) {
      allPagesTag[i].style.borderColor = '#D1A6A6'
      allPagesTag[i].style.backgroundColor = '#D1A6A6'
      allPagesTag[i].style.color = 'white'
      allPagesTag[i].style.width = '25px'
      allPagesTag[i].style.height = '25px'
    }
  }

  {{!-- let selectButton = document.querySelector('select')
  selectButton.onchange = function () {
    location = `/admin/all-orders?page={{currentPage}}&type=${this.value}`
  }

  let selectButtonOptions = selectButton.querySelectorAll('option')

  selectButtonOptions.forEach(option => {
    if (option.value === `{{orderType}}`) {
      option.setAttribute('selected', 'selected')
    }
  }) --}}

  const totalRevenue = document.querySelectorAll('td.total-revenue')
  totalRevenue.forEach(price => {price.innerText = price.innerText.toString().replace(/\B(?=(\d{3})+(?!\d))/g, '.') + ' VND'})
</script>
